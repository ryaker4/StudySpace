/**
 * @file route_cipher.h
 * @brief Заголовочный файл для модуля шифрования методом табличной маршрутной перестановки
 * @author Рябов Кирилл
 * @version 1.0
 * @date 02.12.2025г.
 * @copyright ИБСТ ПГУ
 * @warning Это реализация шифра табличной маршрутной перестановки
 * 
 * Данный файл содержит объявление класса RouteCipher, реализующего шифрование
 * методом табличной маршрутной перестановки, а также класса исключения cipher_error.
 */

#pragma once
#include <string>
#include <stdexcept>

/**
 * @brief Класс для шифрования методом табличной маршрутной перестановки
 * @details Реализует шифр табличной маршрутной перестановки для русского текста.
 *          Ключом является количество столбцов таблицы. Маршрут записи: по горизонтали 
 *          слева направо, сверху вниз. Маршрут считывания: сверху вниз, справа налево.
 * @warning Реализация поддерживает только русские буквы и пробелы
 */
class RouteCipher {
private:
    int columns; ///< Количество столбцов таблицы (ключ шифрования)
public:
    /**
     * @brief Конструктор класса RouteCipher
     * @param[in] cols Количество столбцов таблицы (должно быть положительным числом)
     * @throw cipher_error Если количество столбцов меньше или равно 0
     */
    RouteCipher(int cols);
    /**
     * @brief Метод для зашифрования текста
     * @param[in] text Текст для зашифрования. Может содержать русские буквы и пробелы.
     *                 Строчные буквы автоматически преобразуются в прописные.
     * @return Зашифрованная строка (только русские прописные буквы)
     * @throw cipher_error Если текст пустой, не содержит русских букв или содержит
     *                     недопустимые символы
     */
    std::wstring encrypt(const std::wstring& text);
    /**
     * @brief Метод для расшифрования текста
     * @param[in] cipherText Зашифрованный текст (только русские прописные буквы)
     * @return Расшифрованная строка (русские прописные буквы)
     * @throw cipher_error Если зашифрованный текст пустой, содержит недопустимые
     *                     символы или возникла ошибка при расшифровании
     */
    std::wstring decrypt(const std::wstring& cipherText);
};

/**
 * @brief Класс исключения для ошибок шифрования
 * @details Производный класс от std::invalid_argument для обработки ошибок,
 *          возникающих при шифровании и расшифровании
 */
class cipher_error : public std::invalid_argument {
public:
    /**
     * @brief Конструктор класса cipher_error
     * @param[in] message Сообщение об ошибке
     */
    explicit cipher_error(const std::string& message) 
        : std::invalid_argument(message) {}
};